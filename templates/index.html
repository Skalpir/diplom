<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>–°–∏—Å—Ç–µ–º–∞ –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –∞–Ω–æ–º–∞–ª—ñ–π</title>
  <!-- –ü—ñ–¥–∫–ª—é—á–∞—î–º–æ Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- –ü—ñ–¥–∫–ª—é—á–∞—î–º–æ Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-light">

  <div class="container py-4">
    <h1 class="mb-4">–°–∏—Å—Ç–µ–º–∞ –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –∞–Ω–æ–º–∞–ª—ñ–π —É —Å–µ–Ω—Å–æ—Ä–∞—Ö</h1>

    <!-- –ö–Ω–æ–ø–∫–∏ –∫–µ—Ä—É–≤–∞–Ω–Ω—è -->
    <div class="mb-4">
      <button class="btn btn-primary me-2" onclick="loadData()">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –¥–∞–Ω—ñ</button>
      <button class="btn btn-success me-2" onclick="runAnalysis()">–ó–∞–ø—É—Å—Ç–∏—Ç–∏ –∞–Ω–∞–ª—ñ–∑</button>
      <button class="btn btn-warning me-2" onclick="loadLog()">–ü–æ–∫–∞–∑–∞—Ç–∏ –ª–æ–≥ –ø–æ–¥—ñ–π</button>
      <button class="btn btn-secondary" onclick="downloadReport()">–°–∫–∞—á–∞—Ç–∏ –∑–≤—ñ—Ç</button>
    </div>

    <!-- –¢–∞–±–ª–∏—Ü—è –ª–æ–≥—ñ–≤ –ø–æ–¥—ñ–π -->
    <div class="card mb-4">
      <div class="card-header">üìã –ñ—É—Ä–Ω–∞–ª –ø–æ–¥—ñ–π</div>
      <div class="card-body">
        <table class="table table-bordered table-striped" id="log-table">
          <thead>
            <tr>
              <th>–ß–∞—Å</th>
              <th>–°–µ–Ω—Å–æ—Ä</th>
              <th>–ó–Ω–∞—á–µ–Ω–Ω—è</th>
              <th>–¢–∏–ø</th>
            </tr>
          </thead>
          <tbody id="log-body">
            <!-- –î–∞–Ω—ñ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è —Ç—É—Ç -->
          </tbody>
        </table>
      </div>
    </div>

    <!-- –ì—Ä–∞—Ñ—ñ–∫ (–∑–∞–≥–ª—É—à–∫–∞) -->
    <div class="card">
      <div class="card-header">üìà –ì—Ä–∞—Ñ—ñ–∫ (–¥–µ–º–æ)</div>
      <div class="card-body">
        <canvas id="sensorChart" height="100"></canvas>
      </div>
    </div>

  </div>

  <!-- JS-–ª–æ–≥—ñ–∫–∞ -->
  <script>
    // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
    function loadData() {
      fetch('/load-data', {method: 'POST'})
        .then(res => res.json())
        .then(data => alert(data.message));
    }

    // –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª—ñ–∑—É
    function runAnalysis() {
      fetch('/run-analysis', {method: 'POST'})
        .then(res => res.json())
        .then(data => alert(data.message));
    }

    // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∂—É—Ä–Ω–∞–ª—É –ø–æ–¥—ñ–π
    function loadLog() {
      fetch('/get-log')
        .then(res => res.json())
        .then(data => {
          const tbody = document.getElementById('log-body');
          tbody.innerHTML = '';
          data.forEach(row => {
            const tr = document.createElement('tr');
            tr.innerHTML = `<td>${row.time}</td><td>${row.sensor}</td><td>${row.value}</td><td>${row.type}</td>`;
            tbody.appendChild(tr);
          });
        });
    }

    // –°–∫–∞—á—É–≤–∞–Ω–Ω—è –∑–≤—ñ—Ç—É
    function downloadReport() {
      fetch('/download-report')
        .then(res => res.json())
        .then(data => alert(data.message));
    }

    // –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ–π–Ω–∏–π –≥—Ä–∞—Ñ—ñ–∫
    const ctx = document.getElementById('sensorChart');
    const chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: ['T1', 'T2', 'T3', 'T4', 'T5'],
        datasets: [{
          label: 'Gyro_X',
          data: [1, 4, 2, 6, 3],
          borderColor: 'blue',
          tension: 0.2
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { position: 'top' }
        }
      }
    });
  </script>

</body>
</html>
